<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Funbox - Perfil y Tienda</title>
    <style>
        :root { --p-blue: #00d2ff; --p-green: #00ff88; --p-gold: #ffcc00; }
        body { background: #050505; color: white; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* IZQUIERDA: √ÅREA VISUAL */
        .preview-zone { 
            flex: 1; 
            display: flex; 
            flex-direction: column;
            align-items: center; 
            justify-content: center; 
            background: radial-gradient(circle, #111 0%, #000 100%); 
            position: relative;
        }

        /* SISTEMA DE DINERO */
        .wallet {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.1);
            padding: 10px 20px;
            border-radius: 50px;
            border: 1px solid var(--p-gold);
            display: flex;
            align-items: center;
            gap: 10px;
            backdrop-filter: blur(5px);
        }
        .wallet span { color: var(--p-gold); font-weight: 900; font-size: 20px; }

        .avatar-display {
            font-size: 150px; 
            margin-bottom: 20px;
            filter: drop-shadow(0 0 20px rgba(0, 210, 255, 0.3));
            transition: transform 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .skin-title { 
            font-size: 80px; 
            font-weight: 900; 
            color: var(--p-blue); 
            text-transform: uppercase; 
            text-shadow: 0 0 30px rgba(0, 210, 255, 0.8);
            letter-spacing: 5px;
        }

        .btn-action {
            margin-top: 20px;
            padding: 15px 40px;
            border-radius: 10px;
            border: none;
            font-weight: 900;
            cursor: pointer;
            text-transform: uppercase;
            transition: 0.3s;
        }

        /* DERECHA: INVENTARIO Y TIENDA */
        .inventory-zone { 
            width: 380px; 
            background: #0f0f0f; 
            border-left: 2px solid #222; 
            padding: 25px; 
            display: flex; 
            flex-direction: column; 
            overflow-y: auto;
        }
        
        .section-title { font-size: 14px; color: #555; letter-spacing: 2px; margin-bottom: 15px; border-bottom: 1px solid #222; padding-bottom: 5px; }

        .grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 12px; 
            margin-bottom: 30px;
        }

        .card { 
            background: #161616; 
            border: 2px solid #222; 
            border-radius: 15px; 
            padding: 15px; 
            text-align: center; 
            cursor: pointer; 
            transition: 0.3s; 
            position: relative;
        }
        .card:hover { border-color: var(--p-blue); }
        .card.selected { border-color: var(--p-green); background: rgba(0, 255, 136, 0.05); }
        .card span { font-size: 40px; display: block; margin-bottom: 5px; }
        .card p { margin: 0; font-size: 12px; font-weight: 900; color: #fff; }
        
        .price-tag {
            background: var(--p-gold);
            color: black;
            font-size: 10px;
            font-weight: 900;
            padding: 2px 8px;
            border-radius: 5px;
            display: inline-block;
            margin-top: 5px;
        }

        .btn-back {
            background: transparent;
            color: #444;
            border: 1px solid #222;
            padding: 10px;
            cursor: pointer;
            margin-top: auto;
            border-radius: 5px;
        }
        .btn-back:hover { color: white; border-color: white; }

    </style>
</head>
<body>

<div class="preview-zone">
    <div class="wallet">
        ü™ô <span id="balance-display">0</span>
    </div>

    <div id="avatar-emoji" class="avatar-display">üë§</div>
    <div id="skin-name-display" class="skin-title">SELECCIONA</div>
    <div id="action-container"></div>
</div>

<div class="inventory-zone">
    <div class="section-title">üì¶ MI ARMARIO</div>
    <div class="grid" id="inventory-grid"></div>

    <div class="section-title">üõí TIENDA DE AVATARES</div>
    <div class="grid" id="shop-grid"></div>

    <button class="btn-back" onclick="location.href='index.html'">SALIR AL MEN√ö</button>
</div>

<script>
    // Configuraci√≥n de Avatares
    const allAvatars = {
        "juan": { id: "juan", emoji: "üë®", name: "JUAN", price: 0 },
        "carla": { id: "carla", emoji: "üë©", name: "CARLA", price: 0 },
        "robot": { id: "robot", emoji: "ü§ñ", name: "CYBORG", price: 500 },
        "ninja": { id: "ninja", emoji: "ü•∑", name: "SHINOBI", price: 800 },
        "alien": { id: "alien", emoji: "üëΩ", name: "VISITOR", price: 1200 },
        "cat": { id: "cat", emoji: "üê±", name: "MIAU", price: 2000 }
    };

    // Estado del Jugador (Cargar de LocalStorage)
    let playerData = JSON.parse(localStorage.getItem("funbox_player")) || {
        money: 1000,
        owned: ["juan", "carla"],
        current: "juan"
    };

    function saveData() {
        localStorage.setItem("funbox_player", JSON.stringify(playerData));
    }

    function renderUI() {
        document.getElementById("balance-display").innerText = playerData.money;
        
        const invGrid = document.getElementById("inventory-grid");
        const shopGrid = document.getElementById("shop-grid");
        invGrid.innerHTML = "";
        shopGrid.innerHTML = "";

        Object.values(allAvatars).forEach(av => {
            const isOwned = playerData.owned.includes(av.id);
            const card = document.createElement("div");
            card.className = `card ${playerData.current === av.id ? 'selected' : ''}`;
            
            if (isOwned) {
                card.onclick = () => selectAvatar(av.id);
                card.innerHTML = `<span>${av.emoji}</span><p>${av.name}</p>`;
                invGrid.appendChild(card);
            } else {
                card.onclick = () => previewShopItem(av.id);
                card.innerHTML = `<span>${av.emoji}</span><p>${av.name}</p><div class="price-tag">ü™ô ${av.price}</div>`;
                shopGrid.appendChild(card);
            }
        });

        updatePreview();
    }

    function selectAvatar(id) {
        playerData.current = id;
        saveData();
        renderUI();
    }

    function previewShopItem(id) {
        const av = allAvatars[id];
        document.getElementById("skin-name-display").innerText = av.name;
        document.getElementById("avatar-emoji").innerText = av.emoji;
        
        const container = document.getElementById("action-container");
        container.innerHTML = `<button class="btn-action" style="background:var(--p-gold)" onclick="buyAvatar('${id}')">COMPRAR POR ü™ô ${av.price}</button>`;
    }

    function buyAvatar(id) {
        const av = allAvatars[id];
        if (playerData.money >= av.price) {
            playerData.money -= av.price;
            playerData.owned.push(id);
            playerData.current = id;
            saveData();
            renderUI();
            alert("¬°Nuevo avatar desbloqueado!");
        } else {
            alert("No tienes suficientes Funcoins ü™ô");
        }
    }

    function updatePreview() {
        const av = allAvatars[playerData.current];
        document.getElementById("skin-name-display").innerText = av.name;
        document.getElementById("avatar-emoji").innerText = av.emoji;
        document.getElementById("action-container").innerHTML = `<button class="btn-action" style="background:var(--p-green); cursor:default">EQUIPADO</button>`;
        
        const emojiEl = document.getElementById("avatar-emoji");
        emojiEl.style.transform = "scale(1.1)";
        setTimeout(() => emojiEl.style.transform = "scale(1)", 150);
    }

    // Inicializaci√≥n
    renderUI();
</script>
</body>
</html>
