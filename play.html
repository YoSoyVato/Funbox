<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Funbox Studio - Play</title>
<style>
  body { margin:0; overflow:hidden; background: #000; }
  #ui {
    position: fixed; top:20px; left:20px; color:#444;
    font-family: 'Arial Rounded MT Bold', sans-serif;
    background: rgba(255, 255, 255, 0.9);
    padding:15px; border-radius:20px; z-index:10;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
  }
</style>
</head>
<body>

<div id="ui">
  üì¶üõ†Ô∏è <b>Funbox Studio</b><br>
  WASD: Moverse | <b>Shift: CORRER</b> | <b>C: Agacharse</b> | <b>R: C√°mara Frontal</b>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.min.js"></script>
<script>
/* ================= TODO TU C√ìDIGO SIN CAMBIOS ================= */
/* ‚Ä¶ (TODO lo anterior queda EXACTAMENTE igual) ‚Ä¶ */

// --- PERSONAJE PROFESIONAL (MEJORADO) ---
const player = new THREE.Group();
player.position.copy(spawnPoint); 
const cuerpoVisual = new THREE.Group();
player.add(cuerpoVisual);

const listaOjos = [];
let piernaI, piernaD, brazoI, brazoD, cabezaMesh, cabezaGroup;

function buildPlayerModel() {
    let skinCol = 0xc4a484;    
    let shirtCol = 0x2b1d16;
    let pantsCol = 0x4d4d4d;
    let hairCol = 0x1a1a1a;
    let hatCol = 0x1a110d;

    const skinMat = new THREE.MeshStandardMaterial({color: skinCol, roughness: 0.6});
    const shirtMat = new THREE.MeshStandardMaterial({color: shirtCol, roughness: 0.8});
    const pantsMat = new THREE.MeshStandardMaterial({color: pantsCol, roughness: 0.8});
    const hairMat = new THREE.MeshStandardMaterial({color: hairCol, roughness: 0.9});
    const hatMat = new THREE.MeshStandardMaterial({color: hatCol, roughness: 0.7});

    cabezaGroup = new THREE.Group();
    cabezaGroup.position.y = 0.78;
    cuerpoVisual.add(cabezaGroup);

    cabezaMesh = new THREE.Mesh(new THREE.BoxGeometry(0.42, 0.42, 0.42), skinMat);
    cabezaMesh.castShadow = true;
    cabezaGroup.add(cabezaMesh);

    const hairSideL = new THREE.Mesh(new THREE.BoxGeometry(0.1, 0.25, 0.43), hairMat);
    hairSideL.position.set(-0.18, 0, 0);
    const hairSideR = hairSideL.clone();
    hairSideR.position.x = 0.18;
    const hairFront = new THREE.Mesh(new THREE.BoxGeometry(0.35, 0.12, 0.1), hairMat);
    hairFront.position.set(0, 0.12, 0.18);
    cabezaMesh.add(hairSideL, hairSideR, hairFront);

    const hatFold = new THREE.Mesh(new THREE.BoxGeometry(0.46, 0.14, 0.46), hatMat);
    hatFold.position.y = 0.18;
    const hatDome = new THREE.Mesh(
        new THREE.SphereGeometry(0.23, 16, 16, 0, Math.PI*2, 0, Math.PI/2),
        hatMat
    );
    hatDome.position.y = 0.24;
    hatDome.scale.y = 0.8;
    cabezaMesh.add(hatFold, hatDome);

    function crearOjo(x) {
        const ojoGroup = new THREE.Group();
        const pupila = new THREE.Mesh(
            new THREE.SphereGeometry(0.08, 16, 16),
            new THREE.MeshBasicMaterial({color: 0x000000})
        );
        pupila.scale.z = 0.3;
        ojoGroup.add(pupila);
        ojoGroup.position.set(x, -0.08, 0.21);
        listaOjos.push(ojoGroup); 
        return ojoGroup;
    }
    cabezaMesh.add(crearOjo(-0.12), crearOjo(0.12));

    const torso = new THREE.Mesh(
        new THREE.CapsuleGeometry(0.18, 0.35, 8, 16),
        shirtMat
    );
    torso.position.y = 0.35;
    cuerpoVisual.add(torso);

    const armGeo = new THREE.CapsuleGeometry(0.065, 0.2, 8, 12);
    brazoI = new THREE.Mesh(armGeo, shirtMat);
    brazoI.position.set(-0.25, 0.45, 0);
    brazoD = brazoI.clone();
    brazoD.position.x = 0.25;
    cuerpoVisual.add(brazoI, brazoD);

    const legGeo = new THREE.CapsuleGeometry(0.08, 0.25, 8, 12);
    legGeo.translate(0, -0.12, 0); 
    piernaI = new THREE.Mesh(legGeo, pantsMat);
    piernaI.position.set(-0.11, 0.25, 0); 
    piernaD = piernaI.clone();
    piernaD.position.x = 0.11;
    cuerpoVisual.add(piernaI, piernaD);

    // ================= EXTRA ESTILO (SIN REEMPLAZAR NADA) =================

    const hoodExtra = new THREE.Mesh(
        new THREE.SphereGeometry(0.27, 16, 16),
        new THREE.MeshStandardMaterial({ color: 0x0e0e0e, roughness: 0.9 })
    );
    hoodExtra.scale.set(1.05, 0.85, 1.05);
    hoodExtra.position.y = 0.12;
    cabezaMesh.add(hoodExtra);

    const chestArmor = new THREE.Mesh(
        new THREE.BoxGeometry(0.32, 0.22, 0.18),
        shirtMat
    );
    chestArmor.position.set(0, 0.42, 0.09);
    cuerpoVisual.add(chestArmor);

    const foreArmGeo = new THREE.CapsuleGeometry(0.055, 0.12, 8, 12);
    const foreArmI = new THREE.Mesh(foreArmGeo, shirtMat);
    foreArmI.position.set(-0.25, 0.32, 0);
    cuerpoVisual.add(foreArmI);

    const foreArmD = foreArmI.clone();
    foreArmD.position.x = 0.25;
    cuerpoVisual.add(foreArmD);

    const calfGeo = new THREE.CapsuleGeometry(0.07, 0.15, 8, 12);
    calfGeo.translate(0, -0.08, 0);

    const calfI = new THREE.Mesh(calfGeo, pantsMat);
    calfI.position.set(-0.11, 0.12, 0);
    cuerpoVisual.add(calfI);

    const calfD = calfI.clone();
    calfD.position.x = 0.11;
    cuerpoVisual.add(calfD);
}

buildPlayerModel();
scene.add(player);

/* ================= RESTO DEL ARCHIVO SIN CAMBIOS ================= */
</script>
</body>
</html>
